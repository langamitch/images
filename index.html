<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Responsive Image Gallery</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #121212;
      color: #fff;
    }

    /* ===== TOP NAVBAR ===== */
    nav {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: .8rem 1rem;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(10px);
      z-index: 1000;
    }

    .logo img {
      width: 30px;
      height: 30px;
    }

    .nav-links {
      display: flex;
      gap: 1.5rem;
    }

    .nav-links a {
      color: #fff;
      text-decoration: none;
      font-size: 14px;
      font-weight: 400;
    }

    .right {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .talk {
      background: #ffffff;
      color: #000;
      border: none;
      padding: 0.6rem 1rem;
      border-radius: 30px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
    }

    .social svg {
      width: 18px;
      height: 18px;
      fill: #fff;
    }

    /* ===== SIDEBAR ===== */
    .menu-toggle {
      display: none;
      cursor: pointer;
    }

    .sidebar {
      position: fixed;
      top: 0;
      left: -100%;
      width: 70%;
      max-width: 300px;
      height: 100%;
      background: #000;
      color: #fff;
      padding: 2rem;
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
      transition: left 0.3s ease;
      z-index: 1500;
    }

    .sidebar.active {
      left: 0;
    }

    .sidebar a {
      color: #fff;
      text-decoration: none;
      font-size: 18px;
    }

    @media (max-width: 768px) {
      .nav-links,
      .social {
        display: none;
      }

      .menu-toggle {
        display: block;
      }
    }

    /* ===== GALLERY ===== */
    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
      padding: 100px 20px 60px; /* Extra top padding for navbar */
    }

    .gallery img {
      width: 100%;
      height: 300px;
      object-fit: cover;
      cursor: pointer;
      border-radius: 8px;
      transition: transform 0.3s;
    }

    .gallery img:hover {
      transform: scale(1.05);
    }

    /* ===== MODAL ===== */
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.9);
      justify-content: center;
      align-items: center;
      flex-direction: column;
      padding: 20px;
      z-index: 2000;
    }

    .modal-content {
      max-width: 800px;
      width: 100%;
      text-align: center;
    }

    .modal img {
      width: 100%;
      height: auto;
      border-radius: 8px;
    }

    .description {
      margin: 10px 0;
      font-size: 18px;
    }

    .similar-items {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 10px;
    }

    .similar-items img {
      width: 80px;
      height: 80px;
      object-fit: cover;
      border-radius: 6px;
      cursor: pointer;
    }

    .close {
      position: absolute;
      top: 20px;
      right: 30px;
      font-size: 40px;
      font-weight: bold;
      color: #fff;
      cursor: pointer;
    }

    .loading {
      text-align: center;
      padding: 20px;
      font-size: 18px;
      color: #ccc;
    }
  </style>
</head>
<body>
  <!-- NAVBAR -->
  <nav>
    <div class="logo"><img src="assets/H4.svg" alt="Logo"></div>
    <div class="nav-links">
      <a href="#">Work</a>
      <a href="about.html">About</a>
      <a href="#">Services</a>
    </div>
    <div class="right">
      <button class="talk">Let's Talk</button>
      <a href="https://www.instagram.com/wandile_010">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">
          <path d="M16.5 5C10.2 5 5 10.2 5 16.5V31.5C5 37.8 10.2 43 16.5 43H31.5C37.8 43 43 37.8 43 31.5V16.5C43 10.2 37.8 5 31.5 5H16.5zM24 14C18.5 14 14 18.5 14 24C14 29.5 18.5 34 24 34C29.5 34 34 29.5 34 24C34 18.5 29.5 14 24 14z"></path>
        </svg>
      </a>
      <div class="menu-toggle" id="menu-toggle">
        <svg xmlns="http://www.w3.org/2000/svg" height="24px" width="24px" fill="#fff" viewBox="0 -960 960 960">
          <path d="M180-370h600v60H180Zm0-160h600v60H180Z"/>
        </svg>
      </div>
    </div>
  </nav>

  <!-- SIDEBAR -->
  <div class="sidebar" id="sidebar">
    <a href="#">Work</a>
    <a href="about.html">About</a>
    <a href="#">Services</a>
  </div>

  <!-- GALLERY -->
  <div class="gallery" id="gallery"></div>
  <div class="loading" id="loading">Loading...</div>

  <!-- MODAL -->
  <div class="modal" id="modal">
    <span class="close" id="close">&times;</span>
    <div class="modal-content">
      <img id="modal-img" src="" alt="">
      <div class="description" id="modal-desc"></div>
      <h3>Similar Items</h3>
      <div class="similar-items" id="similar-items"></div>
    </div>
  </div>

<script>
const accessKey = 'rp9_shDmKuIKGdLrL6g0l7-vvAWYuf2RTSa717SRuM0';
const gallery = document.getElementById('gallery');
const modal = document.getElementById('modal');
const modalImg = document.getElementById('modal-img');
const modalDesc = document.getElementById('modal-desc');
const similarItems = document.getElementById('similar-items');
const closeBtn = document.getElementById('close');
const loadingDiv = document.getElementById('loading');
const sidebar = document.getElementById('sidebar');
const menuToggle = document.getElementById('menu-toggle');

let page = 1;
const perPage = 12;
let loading = false;
let query = 'technology';

// Fetch images
async function fetchImages(query, page) {
  loading = true;
  loadingDiv.style.display = 'block';
  const res = await fetch(`https://api.unsplash.com/search/photos?client_id=${accessKey}&query=${query}&page=${page}&per_page=${perPage}`);
  const data = await res.json();
  loading = false;
  loadingDiv.style.display = 'none';
  return data.results;
}

// Load gallery
async function loadGallery() {
  const images = await fetchImages(query, page);
  images.forEach(img => {
    const imageElem = document.createElement('img');
    imageElem.src = img.urls.regular;
    imageElem.alt = img.alt_description || 'Unsplash Image';
    imageElem.loading = 'lazy';
    imageElem.addEventListener('click', () => openModal(img));
    gallery.appendChild(imageElem);
  });
}

// Open modal
function openModal(img) {
  modal.style.display = 'flex';
  modalImg.src = img.urls.regular;
  modalDesc.textContent = img.alt_description || 'No description available';
  similarItems.innerHTML = '';

  const relatedQuery = img.tags && img.tags.length > 0 ? img.tags[0].title : 'technology';
  fetchImages(relatedQuery, 1).then(similar => {
    similar.forEach(s => {
      const simImg = document.createElement('img');
      simImg.src = s.urls.small;
      simImg.alt = s.alt_description || 'Similar Image';
      simImg.addEventListener('click', () => openModal(s));
      similarItems.appendChild(simImg);
    });
  });
}

// Close modal
closeBtn.onclick = () => modal.style.display = 'none';
modal.addEventListener('click', e => {
  if (e.target === modal) modal.style.display = 'none';
});

// Infinite scroll with throttle
window.addEventListener('scroll', () => {
  if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 100 && !loading) {
    page++;
    loadGallery();
  }
});

// Sidebar toggle
menuToggle.addEventListener('click', () => {
  sidebar.classList.toggle('active');
});

// Initial load
loadGallery();
</script>
</body>
</html>
